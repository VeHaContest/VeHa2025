# VeHa-2025 — Решение: TLA+ + Data Structures

Комплект включает спецификации и конфигурации TLC для 6 этапов:

1. **1_file.tla** — модель файла и операции записи до целевого `ANSWER`.
2. **2_users.tla** — множество пользователей (`MAX_USERS`), заготовка под локальные логи.
3. **3_log.tla** — локальные логи изменений; инварианты монотонности и отсутствие потерь.
4. **4_server_push.tla** — `Push` с предусловием `IsPrefix(server, user)`.
5. **5_server_pull.tla** — `Pull` с предусловием `IsPrefix(user, server)`.
6. **6_server_merge.tla** — безопасный `Merge` (без потерь) и финальная синхронизация.

## Структура
- `spec/` — рабочие модули `.tla` и конфигурации `.cfg` для запуска в TLA+ Toolbox/TLC.
- `docs/` — PDF с постановкой задачи.

## Запуск (TLA+ Toolbox / TLC)
1) Открыть `spec/6_server_merge.tla` (или любой этап 1–5).  
2) Запустить модель из соответствующего `.cfg`. Константы заданы для малых доменов (`MAX_TEXT_LINES`, `MAX_USERS`, `MAX_LOG_SIZE`), `CHECK_DEADLOCK = FALSE`.  
3) Проверить инварианты: `TypeOK`, `LogAlwaysGrows`, `DiffBetweenConsequentEntries`, `PullOrPush` и др.  
4) Для проверки достижимости полной синхронизации на конечных доменах можно включить справедливость (`WF`/`SF`) для действий `Push/Pull/Merge` в конфигурации и задать соответствующее свойство.
